---
title: "はじめに - path/filepathパッケージとは"
free: false
---

本章では`path/filepath`パッケージの概要を説明します。公式ドキュメント等を読んだことがある方にとっては目新しい情報はないかと思うので、流し読みして頂いても結構です。

## `path/filepath`の機能
- `path/filepath`は標準パッケージの一つで、我々が普段扱うファイルやディレクトリ等の物理ファイルパスの扱いを補助してくれるものです。
- UNIX系とWindows系では物理ファイルパスのセパレータが違いますよね？UNIX系は`/`、Windows系は`\`です。
- このOSによるセパレータの違いは、クロスプラットフォームで動作するアプリケーションの開発において時に落とし穴になりがちですが、`path/filepath`パッケージを活用することで、開発者はその回避が容易になります。
  - 例えばあるディレクトリ下(変数`dst`で定義)のファイルに対し何か処置を行いたいとき、次のように書くとWindows系で適切に動作しない場合があります。

```go
func main() {
    dst := "foo"
    savepath := dst + "/bar.txt"
    // 以下何かの処置
}
```

  - これに対処するには次のようにします。適切なセパレータを付けて文字列を結合してくれます。

```go
func main() {
    dst := "foo"
    savepath := filepath.Join(dst, "bar.txt")
    // 以下何かの処置
}
```

- ちなみに上記落とし穴は何も開発ターゲットがクロスプラットフォームの場合だけに生じるわけではありません。開発段階においても、各開発者ごとに異なるOSを使うことはあり得るわけで、そうした中で各開発者の環境に依存した動作を起こしえます。なんにせよ対処しておくに越したことはないと考えます。

## pathとは違うの？
- `path/filepath`は、その名の通りpathパッケージの一部です。両者の違いは次の通りです。

| パッケージ | セパレータ | 用途 |
| --- | --- | --- |
| `path` | `/` | URIなどの`/`だけで区切られたパス |
| `path/filepath` | OSによる | 物理ファイルパス |

- UNIX系ではセパレータが`/`ですので、誤ってpathを使っても問題は顕在化しないでしょう。しかしWindows系でそのプログラムを動作させると意図した動作にはならず、時にはセキュリティ面でも脅威になります。
- まずはファイルやディレクトリを扱うときは`path/filepath`という点を体に覚えさせるのが大事そうですね…！

## まとめ
本章では簡単に`path/filepath`の説明をしました。`path`と混同せず適切に使用することで、クロスプラットフォーム開発を安全・快適に進めることが可能になる、素晴らしい存在ですね。

次章からは提供される関数たちについて踏み込んでいきます。